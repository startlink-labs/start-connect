[tools]
node = "24"
pnpm = "10"
python = "3.14"
uv = "0.9"

[tasks.install]
description = "Install dependencies for both frontend and backend"
run = [
  "cd backend && uv sync",
  "cd frontend && pnpm install"
]

[tasks.dev]
description = "Start development servers"
run = "mise run dev:backend & mise run dev:frontend"

[tasks."dev:backend"]
description = "Start FastAPI development server"
run = "cd backend && uv run fastapi dev main.py --port 8000"

[tasks."dev:frontend"]
description = "Start React development server"
run = "cd frontend && pnpm dev"

[tasks.test]
description = "Run tests for both frontend and backend"
run = [
  "cd backend && uv run pytest",
  "cd frontend && pnpm test"
]

[tasks.lint]
description = "Run linting for both frontend and backend"
run = [
  "cd backend && uv run ruff check .",
  "cd frontend && pnpm lint"
]

[tasks.format]
description = "Format code for both frontend and backend"
run = [
  "cd backend && uv run ruff format .",
  "cd frontend && pnpm format"
]

[tasks.clean]
description = "Clean build artifacts and dependencies"
run = [
  "cd backend && rm -rf .venv __pycache__ .pytest_cache",
  "cd frontend && rm -rf node_modules dist .turbo"
]
